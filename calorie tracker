import datetime

# Task 1: Setup & Introduction
print("Welcome to the Daily Calorie Tracker!")
print("This tool helps you log your meals, track your calorie intake,")
print("and compare it against your daily limit.\n")

# Task 2: Input & Data Collection
meal_names = []
calorie_amounts = []

try:
    meal_count = int(input("How many meals would you like to log today? "))

    for i in range(meal_count):
        meal = input(f"\nEnter name of meal #{i+1}: ")
        calories = float(input(f"Enter calorie amount for {meal}: "))

        meal_names.append(meal)
        calorie_amounts.append(calories)

except ValueError:
    print("Invalid input. Please enter numbers for meal count and calories.")
    exit()

# Task 3: Calorie Calculations
total_calories = sum(calorie_amounts)
average_calories = total_calories / len(calorie_amounts)

try:
    daily_limit = float(input("\nEnter your daily calorie limit: "))
except ValueError:
    print("Invalid calorie limit entered.")
    exit()

# Task 4: Exceed Limit Warning System
print()
if total_calories > daily_limit:
    print("⚠ Warning: You have exceeded your daily calorie limit!")
else:
    print("✅ Good job! You're within your daily calorie limit.")

# Task 5: Neatly Formatted Output
print("\nYour Meal Summary:")
print("Meal Name\tCalories")
print("---------------------------")

for meal, cal in zip(meal_names, calorie_amounts):
    print(f"{meal}\t\t{cal}")

print("---------------------------")
print(f"Total:\t\t{total_calories}")
print(f"Average:\t{average_calories:.2f}")

# Task 6 (Bonus): Save Session Log to File
save_choice = input("\nWould you like to save this session to a file? (yes/no): ").lower()

if save_choice == "yes":
    timestamp = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    filename = f"calorie_log_{datetime.datetime.now().strftime('%Y%m%d_%H%M%S')}.txt"

    with open(filename, "w") as file:
        file.write(f"Daily Calorie Tracker Log\n")
        file.write(f"Timestamp: {timestamp}\n\n")
        file.write("Meal Name\tCalories\n")
        file.write("---------------------------\n")
        for meal, cal in zip(meal_names, calorie_amounts):
            file.write(f"{meal}\t\t{cal}\n")
        file.write("---------------------------\n")
        file.write(f"Total:\t\t{total_calories}\n")
        file.write(f"Average:\t{average_calories:.2f}\n")
        file.write(f"Daily Limit:\t{daily_limit}\n")
        if total_calories > daily_limit:
            file.write("Status:\tExceeded calorie limit ⚠\n")
        else:
            file.write("Status:\tWithin calorie limit ✅\n")

    print(f"\n✅ Session saved to '{filename}'")
else:
    print("Session not saved.")
